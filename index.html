<!DOCTYPE html>
<html lang="es">
<head>
    <meta http-equiv="Permissions-Policy" content="">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptInvest - Portal de Inversiones en Criptomonedas</title>
    
    <!-- CSS Base -->
    <link rel="stylesheet" href="/Web/css/main.css">
    
    <!-- CSS Responsivo (se cargará dinámicamente según dispositivo) -->
    <link rel="stylesheet" id="responsive-css" href="">
    
    <!-- Preload de recursos críticos -->
    <link rel="preload" href="/Web/js/main.js" as="script" crossorigin="anonymous">
    <script src="/Web/js/main.js" crossorigin="anonymous" defer></script>

    <!-- Favicon y PWA -->
    <link rel="icon" type="image/png" href="/Web/assets/images/casa.png">
    <link rel="manifest" href="/Web/manifest.json">
    <meta name="theme-color" content="#2c3e50">
</head>
<body>
    <!-- Contenedor principal -->
    <div id="app-container" class="app-container">
        <!-- Header (se cargará desde components/core/header.html) -->
        <header id="header-container" class="header-container">
            <!-- Carga dinámica del header -->
        </header>
        
        <!-- Selector de modo (Novato/Pro) -->
        <div id="mode-selector" class="mode-selector">
            <button id="novato-mode" class="mode-btn active">Modo Novato</button>
            <button id="pro-mode" class="mode-btn">Modo Pro</button>
        </div>
        
        <!-- Menú de navegación (se cargará desde components/core/menu.html) -->
        <nav id="menu-container" class="menu-container">
            <!-- Carga dinámica del menú -->
        </nav>
        
        <!-- Contenido principal -->
        <main id="main-content" class="main-content">
            <!-- Áreas de contenido por nivel -->
            <section id="content-container" class="content-container">
                <!-- Carga dinámica del contenido según nivel seleccionado -->
            </section>
        </main>
        
        <!-- Sistema de noticias -->
        <section id="news-container" class="news-container">
            <!-- Carga dinámica de noticias -->
        </section>
        
        <!-- Componentes sociales -->
        <section id="social-container" class="social-container">
            <!-- Carga dinámica de componentes sociales -->
        </section>
        
        <!-- Footer (se cargará desde components/core/footer.html) -->
        <footer id="footer-container" class="footer-container">
            <!-- Carga dinámica del footer -->
        </footer>
    </div>
    
    <!-- Scripts principales -->
    <script type="module" src="/Web/js/main.js"></script>
    
    <!-- Detector de dispositivo (inline para carga inmediata) -->
    <script>
        // Detector de dispositivo para cargar CSS adecuado
        function loadResponsiveCSS() {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth < 768;
            const cssLink = document.getElementById('responsive-css');
            cssLink.href = isMobile ? '/Web/css/mobile.css' : '/Web/css/desktop.css';
            
            // Añadir clase al body para estilos específicos
            document.body.classList.add(isMobile ? 'mobile-device' : 'desktop-device');
        }
        
        // Cargar CSS al iniciar
        loadResponsiveCSS();
        
        // Recargar CSS si cambia el tamaño de la ventana
        window.addEventListener('resize', loadResponsiveCSS);
    </script>
    
    <!-- Cargar componentes dinámicos -->
    <script>
        async function loadComponent(id, url) {
            const response = await fetch(url);
            if (response.ok) {
                const html = await response.text();
                document.getElementById(id).innerHTML = html;
            } else {
                console.error(`Error al cargar ${url}: ${response.status}`);
            }
        }

        // Cargar el header, menú y footer
        window.addEventListener('DOMContentLoaded', () => {
            loadComponent('header-container', '/Web/components/core/header.html');
            loadComponent('menu-container', '/Web/components/core/menu.html');
            loadComponent('footer-container', '/Web/components/core/footer.html');
            loadComponent('main-content', '/Web/components/core/main-content.html'); // Nuevo contenido principal
        });
    </script>
</body>
</html>
